 domain_parse_prompt = f"""
        Parse a user's domain selection response and provide intelligent feedback for invalid responses.

        User Response: "{domain_response}"

        Available Categories:
        - Home Delivery (HDP)
        - Specialty (SP)
        - PBM

        PARSING RULES:
        1. Valid Selections:
        - Numbers: "1"→Home Delivery, "2"→Specialty, "3"→PBM, "4"→All
        - Names: "Home Delivery", "Specialty", "PBM", "ALL"
        - Combinations: "1 and 2", "Specialty and PBM"

        2. Invalid Response Types:
        - "confused": "I don't know", "maybe", "not sure", unclear responses
        - "new_question": User asks new question instead of selecting
        - "invalid_input": Gibberish, unrelated text
        - "empty": Empty or very short responses

        3. Smart Response Generation:
        Generate helpful, context-aware follow-up messages for invalid responses.

        EXAMPLES:
        - "1" → valid=true, domains=["Home Delivery"]
        - "PBM" → valid=true, domains=["PBM"]
        - "I don't know" → valid=false, error_type="confused"
        - "What is revenue?" → valid=false, error_type="new_question"

        RESPONSE FORMAT:
        The response MUST be valid JSON. Do NOT include any extra text, markdown, or formatting. The response MUST not start with ```json and end with ```.
        {{
            "valid_domain_selection": true/false,
            "selected_domains": ["list"] or [],
            "error_type": "confused|new_question|invalid_input|empty" or null,
            "smart_followup_message": "helpful message for invalid responses" or null
        }}
