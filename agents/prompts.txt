═══════════════════════════════════════════════════════════════════
SECTION 6: FILTER VALUES EXTRACTION (FROM REWRITTEN QUESTION)
═══════════════════════════════════════════════════════════════════

**IMPORTANT:** Extract filter values from the REWRITTEN question (after applying context inheritance), not from the current user input.

**GENERIC EXTRACTION LOGIC:**

For every word/phrase in the rewritten question, apply these checks in order:

**Step 1: Does it have an attribute label?**
- Attribute labels: carrier, invoice #, invoice number, claim #, claim number, member ID, member number, patient ID, provider ID, client, account, transaction ID, reference number, contract number, policy number
- If YES → EXCLUDE (LLM will handle it in SQL)
- If NO → Go to Step 2

**Step 2: Is it a pure number (digits only)?**
- Check if value contains ONLY digits: 0-9
- If YES → EXCLUDE
- If NO → Go to Step 3

**Step 3: Is it in the exclusion list?**
- Check against exclusion categories below
- If YES → EXCLUDE
- If NO → Go to Step 4

**Step 4: Does it contain letters (string/alphanumeric)?**
- Check if value contains at least one letter (a-z, A-Z)
- If YES → **EXTRACT IT** ✅
- If NO → EXCLUDE

**EXCLUSION CATEGORIES (Step 3):**
- **Common terms**: "HDP", "Home Delivery", "SP", "Specialty", "Mail", "PBM", "Claim Fee", "Claim Cost", "Activity Fee"
- **Time/Date**: months (January, February, July, etc.), quarters (Q1, Q2, Q3, Q4), years, dates, temporal words (last, next, monthly, quarterly, yearly)
- **Generic words**: revenue, cost, expense, data, analysis, report, top, bottom, show, get, total, overall, what, is, the, for, in, of, and, or
- **Metrics**: revenue, billed amount, claims count, expense, volume, cost, amount, fee, payment

**Multi-word handling:**
- Keep phrases together: "covid vaccine" → ["covid vaccine"]
- Multiple terms: Separate → "diabetes, asthma" as ["diabetes", "asthma"]

**EDGE CASES:**

**Multiple values with same attribute:**
"carrier MPDOVA and BCBS" → both have attribute "carrier" → exclude both

**Mixed standalone and attributed:**
"diabetes for member ID 12345" → "diabetes" passes all checks ✅ | "12345" has attribute + pure number ❌

**EXAMPLES:**

Example 1:
Rewritten: "What is the revenue amount for MPDOVA for September 2025"
→ "MPDOVA": no attribute ✓, not pure number ✓, not in exclusion list ✓, has letters ✓ → **EXTRACT** ✅
→ "September 2025": time/date term → EXCLUDE
→ filter_values: ["MPDOVA"]

Example 2:
Rewritten: "What is invoice #76273623 for diabetes drugs in California for carrier BCBS"
→ "76273623": has attribute "invoice #" → EXCLUDE
→ "diabetes": no attribute ✓, not pure number ✓, not in exclusion list ✓, has letters ✓ → **EXTRACT** ✅
→ "California": no attribute ✓, not pure number ✓, not in exclusion list ✓, has letters ✓ → **EXTRACT** ✅
→ "BCBS": has attribute "carrier" → EXCLUDE
→ filter_values: ["diabetes", "California"]

Example 3:
Rewritten: "What is claim number 982967283632 for cardiology for HDP for July 2025"
→ "982967283632": has attribute "claim number" → EXCLUDE
→ "cardiology": no attribute ✓, not pure number ✓, not in exclusion list ✓, has letters ✓ → **EXTRACT** ✅
→ "HDP": common term → EXCLUDE
→ "July 2025": time/date term → EXCLUDE
→ filter_values: ["cardiology"]
