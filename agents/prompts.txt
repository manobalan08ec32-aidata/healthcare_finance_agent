 You are generating intelligent follow-up questions for healthcare finance analysis to help users drill down deeper into their data.

                CURRENT CONTEXT:
                Current Question: "{current_question}"
                Current Analysis Output Summary: "{narrative_response}"

                USER QUESTION HISTORY (Last 3):
                {recent_user_questions}

                PREVIOUS FOLLOW-UP QUESTIONS (Last 6):
                {recent_followup_questions}

                DOMAIN SELECTION CONTEXT:
                {domain_context}

                DATASET METADATA:
                {metadata_str}

                CRITICAL REQUIREMENTS:
                1. Complete Questions: Each question MUST include a business-friendly metric, exactly one grouping dimension, and an explicit time period (and time grain if trending).
                2. SQL-Ready: Questions must be complete enough to generate precise SQL without additional clarification.
                3. Business Language: Use business/canonical terms derived from metadata column descriptions; never use technical/physical column names.
                4. Domain Compliance: Respect the domain selection context; do not cross domains.
                5. Avoid Repetition: Do not propose anything similar to PREVIOUS FOLLOW-UP QUESTIONS.
                6. Single Focus: One metric and one grouping dimension per question.
                7. No Comparisons: Do NOT generate comparison-style questions (no “compare”, no “vs”, no cross-domain comparisons).
                8. Null Handling (STRICT): Do NOT generate questions that mention or target NULL/missing/unknown/unassigned/blank/N/A values. Avoid dimensions flagged as null‑heavy in the analysis summary. If all viable dimensions are null‑heavy or context is empty, return an empty array.

                LANGUAGE GUIDELINES:
                ✅ USE BUSINESS TERMS: "costs", "revenue", "claims", "members", "therapeutic classes", "states", "age groups"
                ❌ AVOID COLUMN NAMES: technical/physical like "total_paid_amt", "member_cnt", "therapy_class_nm", "state_cd", "age_band"
                ✅ USE CANONICAL TIME TERMS: "Q1 2025", "January 2025", "2024", "monthly", "quarterly"
                ❌ AVOID TECHNICAL TIME TERMS: "service_month", "date_part", "year_month"
                ✅ USE FRIENDLY GROUPINGS: "by state", "by age group", "by therapeutic class", "by product category"
                ❌ AVOID TECHNICAL GROUPINGS: "GROUP BY state_cd", etc.

                EXAMPLES OF BUSINESS-FRIENDLY QUESTIONS:
                ✅ GOOD: "Show me the total claim costs by state for Specialty products in Q2 2025."
                ✅ GOOD: "What are the top 10 therapeutic classes by total revenue for Home Delivery in July 2025?"
                ❌ BAD: "Show me total_paid_amt by state_cd for product_category = 'Specialty'."
                ❌ BAD: "Which states have NULL prescriber specialty in 2025?"

                QUESTION STRUCTURE REQUIREMENTS:
                - Start with: "Show me", "What are", "Break down" (no "Compare").
                - Include one business-friendly metric (e.g., costs, revenue, claims, members).
                - Include exactly one grouping dimension (e.g., by state, by age group, by therapeutic class, by product category).
                - Include an explicit time period (e.g., "Q2 2025", "January 2025"); include time grain when trend language is used (monthly/quarterly).
                - Use exact domain names when referencing product category: "Specialty", "Home Delivery", "PBM".
                - Ensure the three questions are distinct from each other and from PREVIOUS FOLLOW-UP QUESTIONS.

                RESPONSE FORMAT:
                The response MUST be valid JSON. Do NOT include any extra text, markdown, or formatting. The response MUST not start with ```json and end with ```.
                {{
                "followup_questions": ["complete question 1", "complete question 2", "complete question 3"]
                }}

        """
