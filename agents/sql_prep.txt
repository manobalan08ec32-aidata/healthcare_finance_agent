Navigation Input - Current: 'new question - What is PBM revenue for Q3 2025 compared to Q3 2024'
LLM Response: {
    "analysis": {
        "detected_prefix": "new question",
        "clean_question": "What is PBM revenue for Q3 2025 compared to Q3 2024",
        "input_type": "business_question",
        "is_valid_business_question": true,
        "response_message": "",
        "context_decision": "NEW",
        "reasoning": "Detected prefix 'new question -' which is the PRIMARY signal for NEW decision. Clean question contains metric (revenue), filters (PBM), and time periods (Q3 2025, Q3 2024) with comparison structure. This is a complete, self-contained business question about healthcare finance metrics. No inheritance needed since it's explicitly marked as new question and has all required components."
    },
    "rewrite": {
        "rewritten_question": "What is PBM revenue for Q3 2025 compared to Q3 2024",
        "question_type": "what",
        "user_message": ""
    },
    "filters": {
        "filter_values": ["PBM"]
    }
}

Navigation Input - Current: 'follow-up - What therapies contributed to increase'

LLM Response: {
    "analysis": {
        "detected_prefix": "follow-up",
        "clean_question": "What therapies contributed to increase",
        "input_type": "business_question",
        "is_valid_business_question": true,
        "response_message": "",
        "context_decision": "FOLLOW_UP",
        "reasoning": "Detected prefix 'follow-up' which takes highest priority for decision making. Clean question contains 'increase' (growth term) but no metric before it - previous question had 'PBM revenue' so will inherit 'revenue' and rewrite as 'revenue increase'. Current question has partial components (growth term, asking about therapies as grouping) but is missing the core metric and specific filters. Previous question was about 'PBM revenue for Q3 2025 compared to Q3 2024' which had metric (revenue), filters (PBM), and time periods (Q3 2025, Q3 2024). Should inherit 'revenue' as the metric, 'PBM' as filter, and the time comparison 'Q3 2025 compared to Q3 2024' to provide complete context."
    },
    "rewrite": {
        "rewritten_question": "What therapies contributed to revenue increase for PBM for Q3 2025 compared to Q3 2024",
        "question_type": "what",
        "user_message": "I'm using revenue, PBM, and Q3 2025 compared to Q3 2024 from your last question."
    },
    "filters": {
        "filter_values": ["PBM"]
    }
}

Navigation Input - Current: 'follow-up - what GLP-1 drugs drove the increase , include adjusted scripts'

LLM Response: {
    "analysis": {
        "detected_prefix": "follow-up",
        "clean_question": "what GLP-1 drugs drove the increase , include adjusted scripts",
        "input_type": "business_question",
        "is_valid_business_question": true,
        "response_message": "",
        "context_decision": "FOLLOW_UP",
        "reasoning": "Detected prefix 'follow-up' which is the primary signal for FOLLOW_UP decision. Current question has metric (implied from 'drove the increase'), filters (GLP-1 drugs), and additional request (adjusted scripts). Question contains 'increase' but no explicit metric before it - previous question had 'revenue' so will inherit that metric. Previous question had filters 'PBM' and time 'Q3 2025 compared to Q3 2024' which should be inherited since current question doesn't specify these contexts. Decision made based on explicit follow-up prefix."
    },
    "rewrite": {
        "rewritten_question": "What GLP-1 drugs drove the revenue increase for PBM for Q3 2025 compared to Q3 2024, include adjusted scripts",
        "question_type": "what",
        "user_message": "I'm using revenue, PBM, and Q3 2025 compared to Q3 2024 from your last question."
    },
    "filters": {
        "filter_values": ["GLP-1", "PBM"]
    }
}

Navigation Input - Current: 'follow-up - compare drug Wegovy decline'

LLM Response: {
    "analysis": {
        "detected_prefix": "follow-up",
        "clean_question": "compare drug Wegovy decline",
        "input_type": "business_question",
        "is_valid_business_question": true,
        "response_message": "",
        "context_decision": "FOLLOW_UP",
        "reasoning": "Prefix 'follow-up' detected, making this a FOLLOW_UP question. Current question contains 'decline' (growth/decline term) and 'Wegovy' (drug name) but is missing a metric before 'decline'. Previous question had 'revenue' as the metric. Current question is missing filters (PBM), attributes (none in previous), and time period (Q3 2025 vs Q3 2024). Should inherit 'revenue' metric, 'PBM' filter, and 'Q3 2025 vs Q3 2024' time comparison from previous question."
    },
    "rewrite": {
        "rewritten_question": "Compare drug Wegovy revenue decline for PBM for Q3 2025 vs Q3 2024",
        "question_type": "what",
        "user_message": "I'm using revenue metric, PBM filter, and Q3 2025 vs Q3 2024 time comparison from your last question."
    },
    "filters": {
        "filter_values": ["Wegovy", "PBM"]
    }
}

Navigation Input - Current: 'follow-up - What lines of business contributed to the decline"
LLM Response: {
    "analysis": {
        "detected_prefix": "follow-up",
        "clean_question": "What lines of business contributed to the decline in Wegovy",
        "input_type": "business_question",
        "is_valid_business_question": true,
        "response_message": "",
        "context_decision": "FOLLOW_UP",
        "reasoning": "Detected prefix 'follow-up' which takes highest priority. Clean question contains 'decline' but no metric before it ('the decline in Wegovy'). Previous question had 'revenue decline'. Current question has attributes ('lines of business') and mentions Wegovy but is missing the metric and other context. Should inherit 'revenue' metric, 'PBM' filter, and time period 'Q3 2025 vs Q3 2024' from previous question. Decision made based on explicit follow-up prefix and missing components that existed in previous question."
    },
    "rewrite": {
        "rewritten_question": "What lines of business contributed to the revenue decline for drug name Wegovy for PBM for Q3 2025 vs Q3 2024?",
        "question_type": "what",
        "user_message": "I'm using revenue metric, PBM filter, and Q3 2025 vs Q3 2024 time period from your last question."
    },
    "filters": {
        "filter_values": ["Wegovy", "PBM"]
    }
}

Navigation Input - Current: 'follow-up - What Clients in External LOB contributed to the decline'

LLM Response: {
    "analysis": {
        "detected_prefix": "follow-up",
        "clean_question": "What Clients in External LOB contributed to the decline",
        "input_type": "business_question",
        "is_valid_business_question": true,
        "response_message": "",
        "context_decision": "FOLLOW_UP",
        "reasoning": "Prefix 'follow-up' detected, making this a FOLLOW_UP question. Current question has: attributes ('Clients'), filters ('External LOB'), and growth/decline term ('decline') but missing metric before 'decline'. Previous question had 'revenue decline' so will inherit 'revenue' metric. Current also missing time period. Previous question had 'for drug name Wegovy for PBM for Q3 2025 vs Q3 2024' so should inherit 'Wegovy', 'PBM', and 'Q3 2025 vs Q3 2024'. Decision made based on detected prefix and missing components that need inheritance."
    },
    "rewrite": {
        "rewritten_question": "What Clients in External LOB contributed to the revenue decline for drug name Wegovy for PBM for Q3 2025 vs Q3 2024?",
        "question_type": "what",
        "user_message": "I'm using revenue metric, drug name Wegovy, PBM, and Q3 2025 vs Q3 2024 time period from your last question."
    },
    "filters": {
        "filter_values": ["External LOB", "Wegovy", "PBM"]
    }
}
